<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>登録完了</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  margin: 0;
}

/* ===== 1画面目（黒背景） ===== */
.pre-screen {
  position: fixed;
  inset: 0;
  background: #000;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pre-box {
  max-width: 520px;
  text-align: left;
}

.pre-box h1 {
  color: #fff;
  font-size: 26px;
  margin-bottom: 16px;
}

.pre-box ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.pre-box li {
  margin-bottom: 6px;
  font-size: 15px;
}

/* カウントダウン */
.countdown {
  margin-top: 20px;
  font-size: 48px;
  font-weight: bold;
  text-align: center;
}

/* ===== 共通BOX ===== */
.box {
  width: 520px;
  margin: 80px auto;
  background: #fff;
  border: 1px solid #ccc;
  padding: 24px;
}

h1 {
  color: #2e7d32;
  font-size: 20px;
}

hr {
  margin: 16px 0;
}

.notice {
  font-size: 12px;
  color: #777;
}

.hidden {
  display: none;
}

button {
  margin-top: 16px;
  padding: 8px 16px;
}

/* ===== 2画面目（赤背景） ===== */
.danger {
  background: #c62828;
  color: #fff;
  border-color: #a61b1b;
}

.danger h1 {
  color: #fff;
}
</style>
</head>
<body>

<!-- ===== 1画面目 ===== -->
<div class="pre-screen" id="pre">
  <div class="pre-box">
    <h1>処理を確認しています</h1>
    <ul>
      <li>端末名：<span id="pcname"></span></li>
      <li>OS：<span id="os"></span></li>
      <li>ブラウザ：<span id="browser"></span></li>
    </ul>
    <div class="countdown">
      <span id="count">3</span>
    </div>
  </div>
</div>

<!-- ===== 2画面目 ===== -->
<div class="box danger hidden" id="complete">
  <h1>✓ 登録が完了しました</h1>
  <p>ご登録ありがとうございます。</p>
  <p>以下の内容で手続きが完了しました。</p>

  <hr>

  <p><strong>登録内容</strong></p>
  <p>サービス名：社内ポータル</p>
  <p>受付日時：<span id="time"></span></p>
  <p>確認環境：<span id="env"></span></p>
  <p>接続元IP：203.0.113.<span id="fakeIp"></span></p>

  <hr>

  <p>このまま画面を閉じてください。</p>
  <p class="notice">※ 自動的に処理が完了します</p>
</div>

<!-- ===== 3画面目 ===== -->
<div class="box hidden" id="training">
  <h1>これはセキュリティ訓練です</h1>
  <p>
    今回の操作は、標的型攻撃メールを想定した
    セキュリティ訓練です。
  </p>
  <p>
    「登録完了」「確認ありがとうございます」といった
    表現は、実際の攻撃でもよく使用されます。
  </p>

  <hr>

  <ul>
    <li>心当たりのない登録・手続きは開かない</li>
    <li>少しでも不審に感じたら報告する</li>
  </ul>

  <button onclick="window.close()">理解しました</button>
</div>

<script>
/* ===== OS / ブラウザ取得 ===== */
function getOS() {
  const ua = navigator.userAgent;
  if (ua.includes("Windows")) return "Windows";
  if (ua.includes("Mac")) return "macOS";
  if (ua.includes("Android")) return "Android";
  if (ua.includes("iPhone")) return "iOS";
  return "不明";
}

function getBrowser() {
  const ua = navigator.userAgent;
  if (ua.includes("Edg")) return "Microsoft Edge";
  if (ua.includes("Chrome")) return "Google Chrome";
  if (ua.includes("Firefox")) return "Mozilla Firefox";
  if (ua.includes("Safari")) return "Safari";
  return "不明";
}

/* ===== 擬似PC名 ===== */
function fakePcName() {
  const dept = ["OS", "SYS", "DEV", "ADM"];
  return dept[Math.floor(Math.random() * dept.length)] +
         "-PC-" + Math.floor(Math.random() * 900 + 100);
}

/* ===== 初期情報 ===== */
const os = getOS();
const browser = getBrowser();

document.getElementById("os").textContent = os;
document.getElementById("browser").textContent = browser;
document.getElementById("env").textContent = os + " / " + browser;
document.getElementById("pcname").textContent = fakePcName();

/* 時刻 */
document.getElementById("time").textContent =
  new Date().toLocaleString();

/* 偽IP（10～240） */
document.getElementById("fakeIp").textContent =
  Math.floor(Math.random() * (240 - 10 + 1)) + 10;

/* ===== カウントダウン ===== */
let count = 3;
const countEl = document.getElementById("count");

const timer = setInterval(() => {
  count--;
  if (count > 0) {
    countEl.textContent = count;
  } else {
    clearInterval(timer);
  }
}, 1000);

/* ===== 画面遷移（3秒） ===== */
setTimeout(() => {
  pre.classList.add("hidden");
  complete.classList.remove("hidden");
}, 3000);

setTimeout(() => {
  complete.classList.add("hidden");
  training.classList.remove("hidden");
}, 6000);
</script>

</body>
</html>
