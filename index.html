<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Security Training</title>

<style>
body {
  margin: 0;
  font-family: Consolas, monospace;
}

.screen {
  display: none;
  position: relative;
  width: 100vw;
  height: 100vh;
  padding: 40px;
  box-sizing: border-box;
}

/* ---------- screen 1 ---------- */
#screen1 {
  display: block;
  background: #000;
  color: #fff;
  text-align: center;
  cursor: pointer;
}

#countdown {
  font-size: 56px;
  margin-bottom: 20px;
}

/* ---------- screen 2 ---------- */
#screen2 {
  background: #000;
  color: #00ff66;
  display: flex;
  justify-content: center;
  align-items: center;
}

#logBox {
  width: 85%;
  height: 85%;
  border: 2px solid #00ff66;
  padding: 20px;
  background: rgba(0,255,102,0.05);
  overflow-y: auto;
}

.fixed {
  position: sticky;
  top: 0;
  background: #000;
  font-weight: bold;
}

.log {
  font-size: 14px;
  line-height: 1.6;
}

/* ---------- screen 3 ---------- */
#screen3 {
  background: #b00000;
  font-family: "Segoe UI", sans-serif;
}

.box {
  width: 520px;
  margin: 80px auto;
  background: #fff;
  color: #000;
  padding: 24px;
}

/* ---------- screen 4 ---------- */
#training {
  background: #f4f6f8;
  font-family: "Segoe UI", sans-serif;
}

/* ---------- warning ---------- */
#warningOverlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  z-index: 9999;
}

#warningBox {
  max-width: 520px;
  margin: 15% auto;
  background: #b00000;
  color: #fff;
  padding: 24px;
}

button {
  margin-top: 20px;
  padding: 8px 16px;
}
</style>
</head>

<body>

<!-- screen 1 -->
<div class="screen" id="screen1" onclick="forceFullscreen()">
  <div id="countdown"></div>
  <div>
    申込受付<br><br>
    下記内容で登録します。<br>
    ご登録ありがとうございました。
  </div>
</div>

<!-- screen 2 -->
<div class="screen" id="screen2">
  <div id="logBox">
    <div class="fixed">SYSTEM INITIALIZING...</div>
    <div id="logs"></div>
  </div>
</div>

<!-- screen 3 -->
<div class="screen" id="screen3">
  <div class="box">
    <h2>✓ 登録完了</h2>
    <p>受付日時：<span id="time"></span></p>
  </div>
</div>

<!-- screen 4 -->
<div class="screen" id="training">
  <div class="box">
    <h2>これはセキュリティ訓練です</h2>
    <p>
      このサイトは訓練用です。<br>
      実際の申込や送信は行われていません。
    </p>
    <button onclick="showWarning()">閉じる</button>
  </div>
</div>

<!-- warning -->
<div id="warningOverlay">
  <div id="warningBox">
    <h2>⚠ セキュリティ警告</h2>
    <p>
      そうやって安易にボタンを押すと、<br>
      実際にはウイルス感染や<br>
      情報漏えいにつながります。
    </p>
    <button onclick="closeWarning()">理解しました</button>
  </div>
</div>

<script>
/* fullscreen */
function forceFullscreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen().catch(()=>{});
  }
}

/* ---------- countdown → 次画面 ---------- */
let count = 3;
countdown.textContent = count;

const countdownTimer = setInterval(() => {
  count--;
  if (count > 0) {
    countdown.textContent = count;
  } else {
    clearInterval(countdownTimer);
    startLogs();
  }
}, 1000);

/* ---------- logs ---------- */
const logTexts = [
  "Connecting to remote host...",
  "Establishing secure channel...",
  "Authentication token accepted",
  "Enumerating system resources",
  "Uploading session fingerprint",
  "Encrypting outbound stream",
  "Finalizing transaction"
];

let logIndex = 0;
let firstLog = true;

function addLogLine(text, typing) {
  const line = document.createElement("div");
  line.className = "log";
  logs.appendChild(line);

  const time = `[${new Date().toLocaleTimeString()}] `;
  line.textContent = time;

  if (!typing) {
    line.textContent += text;
    return;
  }

  let i = 0;
  const typer = setInterval(() => {
    line.textContent += text.charAt(i++);
    logBox.scrollTop = logBox.scrollHeight;
    if (i >= text.length) clearInterval(typer);
  }, 35);
}

function startLogs() {
  screen1.style.display = "none";
  screen2.style.display = "flex";

  const logTimer = setInterval(() => {
    addLogLine(logTexts[logIndex++], !firstLog);
    firstLog = false;

    if (logIndex >= logTexts.length) {
      clearInterval(logTimer);
      setTimeout(showResult, 1000);
    }
  }, 600);
}

/* ---------- result ---------- */
function showResult() {
  screen2.style.display = "none";
  screen3.style.display = "block";
  time.textContent = new Date().toLocaleString();

  setTimeout(() => {
    screen3.style.display = "none";
    training.style.display = "block";
  }, 2000);
}

/* ---------- warning ---------- */
function showWarning() {
  if (document.fullscreenElement) {
    document.exitFullscreen();
  }
  warningOverlay.style.display = "block";
}
function closeWarning() {
  warningOverlay.style.display = "none";
}
</script>

</body>
</html>
