<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Security Training</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: Consolas, monospace;
}

/* 共通 */
.screen {
  position: absolute;
  width: 100%;
  height: 100%;
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

/* ① 黒（初期） */
#screen1 {
  background: black;
  color: white;
}

/* ② 黒（ログ） */
#screen2 {
  background: black;
  color: #00ff66;
  align-items: flex-start;
  padding: 30px;
  font-size: 18px;
}

/* ③ 赤（完了） */
#screen3 {
  background: red;
  color: white;
  font-size: 26px;
  animation: fade 5s linear infinite;
}

/* ④ 訓練説明 */
#screen4 {
  background: #f4f6f8;
  color: #333;
  font-family: "Segoe UI", sans-serif;
}

.box {
  width: 520px;
  background: #fff;
  border: 1px solid #ccc;
  padding: 24px;
}

@keyframes fade {
  0% { opacity: 0.3; }
  50% { opacity: 1; }
  100% { opacity: 0.3; }
}

.countdown {
  font-size: 64px;
}

.small {
  font-size: 14px;
  margin-top: 10px;
}

#log {
  white-space: pre-line;
}
</style>
</head>

<body>

<!-- ① 初期画面 -->
<div id="screen1" class="screen">
  <div>Initializing System...</div>
  <div class="countdown" id="countdown">3</div>
  <div class="small" id="info"></div>
</div>

<!-- ② ログ流し -->
<div id="screen2" class="screen">
  <div id="log"></div>
</div>

<!-- ③ 完了 -->
<div id="screen3" class="screen">
  <div>自動的に処理が完了します</div>
</div>

<!-- ④ 訓練説明 -->
<div id="screen4" class="screen">
  <div class="box">
    <h2>これはセキュリティ訓練です</h2>
    <p>
      今回表示された一連の画面は、
      標的型攻撃メールを想定した社内訓練です。
    </p>
    <ul>
      <li>完了・確認画面でも安易に信用しない</li>
      <li>処理中ログは攻撃でよく使われる演出</li>
      <li>不審な場合は必ず管理者へ報告</li>
    </ul>
    <p style="font-size:12px;color:#777;margin-top:16px;">
      ※ 実際の通信・情報送信は行われていません
    </p>
  </div>
</div>

<script>
/* ===== 情報生成 ===== */
function randomIP() {
  return "203.0.113." + Math.floor(Math.random() * (240 - 10 + 1) + 10);
}
const ip = randomIP();
const browser = navigator.userAgent;
const pc = location.hostname || "Unknown-PC";

/* ===== 初期表示 ===== */
screen1.style.display = "flex";
document.getElementById("info").innerText =
  `PC: ${pc}\nBrowser: ${browser}\nIP: ${ip}`;

/* ===== カウントダウン（最初のみ） ===== */
let c = 3;
const cd = setInterval(() => {
  c--;
  document.getElementById("countdown").innerText = c;
  if (c === 0) clearInterval(cd);
}, 1000);

/* ===== ログ内容（5秒想定） ===== */
const logs = [
  `Connecting to ${ip}...`,
  "Resolving host...",
  "Opening secure socket...",
  "TLS handshake completed.",
  "Authenticating client...",
  "Firewall rule matched.",
  "Privilege escalation detected.",
  "Memory scan in progress...",
  "Decrypting payload...",
  "Reading registry keys...",
  "Collecting system info...",
  "Uploading packets...",
  "Finalizing session..."
];

let i = 0;
const logEl = document.getElementById("log");

function pushLog() {
  if (i < logs.length) {
    logEl.innerText += logs[i] + "\n";
    i++;
  }
}

/* ===== 画面遷移 ===== */
setTimeout(() => {
  screen1.style.display = "none";
  screen2.style.display = "flex";

  const logTimer = setInterval(pushLog, 350);

  setTimeout(() => {
    clearInterval(logTimer);
    screen2.style.display = "none";
    screen3.style.display = "flex";

    setTimeout(() => {
      screen3.style.display = "none";
      screen4.style.display = "flex";
    }, 5000); // 赤画面 5秒

  }, 5000); // ログ画面 5秒

}, 3000); // 初期画面 3秒
</script>

</body>
</html>
